<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=1024, height=768, initial-scale=1.0, user-scalable=no" />
<title>Clock + Night Mode</title>
<style>
html,body{
  margin:0;background:#000;color:#fff;
  font-family:-apple-system,"Helvetica Neue",Arial,sans-serif;
  height:100%;overflow:hidden;
}
.layout{display:flex;height:100vh;}

.half{flex:1;display:flex;align-items:center;justify-content:center;position:relative;}
#analog{width:90%;height:90%;}
#analog svg{width:100%;height:100%;}

.digital-container{
  text-align:center;display:flex;flex-direction:column;justify-content:center;
  height:100%;width:100%;padding:0 3vw;box-sizing:border-box;
  transform:translateX(-4vw);transition:all 0.8s ease;
}

/* Time */
.digital-time{
  font-size:17vw;font-weight:700;margin:0;position:relative;display:inline-block;
  letter-spacing:-3px;line-height:1;white-space:nowrap;
}
.time-main{display:inline-block;transition:color 2s;}
.colon{display:inline-block;opacity:1;animation:blink 2s infinite ease-in-out;}
@keyframes blink{
  0%,100%{opacity:1;}
  50%{opacity:0.15;}
}
.time-ampm{
  display:inline-block;font-size:3.5vw;margin-left:1vw;vertical-align:super;
  opacity:0.9;font-weight:500;
}

/* Date */
.digital-date{
  margin-top:0.4em;text-align:center;font-size:4.5vw;font-weight:500;white-space:nowrap;
}
.digital-date .day{color:#ff4c4c;transition:color 2s;}

/* Night overlay */
#nightOverlay{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:#000;opacity:0;pointer-events:none;transition:opacity 1s;
  z-index:10;
}

/* Full-screen invisible toggle area */
#toggleArea{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:transparent;z-index:11;
}

@media (max-width:1024px){
  .digital-time{font-size:18vw;}
  .time-ampm{font-size:3.8vw;}
  .digital-date{font-size:5vw;}
}

/* Centered supersize for blackout */
.night-active .layout{
  justify-content:center;align-items:flex-start;flex-direction:column; /* move up */
  padding-top:8vh; /* adjust upward position */
}
.night-active .digital-container{
  transform:none;text-align:center;padding:0;transition:all 0.8s ease;
}
.night-active .digital-time{font-size:24vw;}
.night-active .digital-date{
  font-size:5.5vw;margin-top:0.3em;white-space:normal;
}
.night-active #analog{display:none;}
.night-active .time-main{color:#fff;}
.night-active .digital-date .day{color:#fff;}
.night-active .colon{animation:none;opacity:0.6;}
</style>
</head>
<body>

<div id="nightOverlay"></div>
<div id="toggleArea"></div>

<div class="layout">
  <div class="half">
    <div id="analog">
      <svg viewBox="0 0 200 200">
        <circle cx="100" cy="100" r="98" stroke="#333" stroke-width="4" fill="none"/>
        <line id="hour-hand" x1="100" y1="100" x2="100" y2="55" stroke="#fff" stroke-width="6" stroke-linecap="round"/>
        <line id="minute-hand" x1="100" y1="100" x2="100" y2="35" stroke="#fff" stroke-width="4" stroke-linecap="round"/>
        <line id="second-hand" x1="100" y1="100" x2="100" y2="25" stroke="#ff4c4c" stroke-width="2" stroke-linecap="round"/>
        <circle cx="100" cy="100" r="3" fill="#ff4c4c"/>
      </svg>
    </div>
  </div>

  <div class="half">
    <div class="digital-container" id="digitalArea">
      <div class="digital-time" id="digitalTime">
        <span class="time-main" id="timeMain">--<span class="colon">:</span>--</span>
        <span class="time-ampm" id="timeAMPM">AM</span>
      </div>
      <div class="digital-date" id="digitalDate">Loading date...</div>
    </div>
  </div>
</div>

<script>
function $(id){return document.getElementById(id);}
var nightOpacity=0.12;

/* analog */
function updateAnalog(){
  var n=new Date(),s=n.getSeconds(),m=n.getMinutes(),h=n.getHours()%12;
  $("hour-hand").setAttribute("transform","rotate("+(h*30+m/2)+",100,100)");
  $("minute-hand").setAttribute("transform","rotate("+(m*6)+",100,100)");
  $("second-hand").setAttribute("transform","rotate("+(s*6)+",100,100)");
}

/* digital */
var lastDate="";
function updateDigital(){
  var n=new Date(),h=n.getHours(),m=n.getMinutes(),ampm=h>=12?"PM":"AM";
  var hh=h%12||12;if(m<10)m="0"+m;
  $("timeMain").innerHTML=hh+'<span class="colon">:</span>'+m;
  $("timeAMPM").innerText=ampm;
  var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
  var wdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
  var key=wdays[n.getDay()]+n.getDate();
  if(key!=lastDate){
    $("digitalDate").innerHTML=wdays[n.getDay()]+' '+months[n.getMonth()]+' <span class="day">'+n.getDate()+'</span>';
    lastDate=key;
  }
  checkAutoNight();
}

/* night mode */
var nightActive=false,manualToggle=false;
function enableNight(){
  if(nightActive)return;
  nightActive=true;
  document.body.className="night-active";
  $("nightOverlay").style.opacity=1-nightOpacity;
}
function disableNight(){
  if(!nightActive)return;
  nightActive=false;
  document.body.className="";
  $("nightOverlay").style.opacity=0;
}

/* auto blackout 10:20pmâ€“6:30am */
function checkAutoNight(){
  if(manualToggle)return;
  var n=new Date(),h=n.getHours(),m=n.getMinutes();
  var mins=h*60+m,start=22*60+20,end=6*60+30;
  if(mins>=start||mins<end){enableNight();}
  else{disableNight();}
}

/* full-screen manual toggle */
$("toggleArea").onclick=function(){
  manualToggle=true;
  if(nightActive){disableNight();}else{enableNight();}
};

/* loops */
setInterval(updateAnalog,1000);
setInterval(updateDigital,1000);
updateAnalog();updateDigital();
</script>
</body>
</html>

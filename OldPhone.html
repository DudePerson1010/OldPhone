<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=1024, height=768, initial-scale=1.0, user-scalable=no" />
<title>Minimal Clock — Fit & Two-line Date</title>
<style>
  html,body { height:100%; margin:0; background:#000; color:#fff; font-family:-apple-system, "Helvetica Neue", Arial, sans-serif; }
  .layout { display:flex; height:100vh; overflow:hidden; }

  .half { flex:1; display:flex; align-items:center; justify-content:center; }

  /* analog */
  #analog { width:90%; height:90%; }
  #analog svg { width:100%; height:100%; }

  /* digital side */
  .digital-container {
    box-sizing:border-box;
    padding:0 3vw;
    width:100%;
    height:100%;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
  }

  /* outer area that constrains time width so we can fit */
  .time-area {
    width:82%;                /* leave a little margin so AM/PM fits */
    max-width: 680px;        /* guard for large laptops */
    min-width: 260px;
    text-align:center;
    overflow:visible;
  }

  /* Time wrapper: AM/PM sits next to the scaled main time */
  .digital-time {
    display:inline-block;
    position:relative;
    line-height:1;
    white-space:nowrap;
  }

  /* the big numbers — we will scale this element with JS when needed */
  .time-main {
    display:inline-block;
    font-weight:800;
    font-size:18vw;      /* starting size — will be scaled down if it overflows */
    letter-spacing:-3px;
    line-height:1;
    transform-origin:left center;
    vertical-align:baseline;
    white-space:nowrap;
  }

  /* AM/PM kept small and outside the scaling, vertically aligned to top */
  .time-ampm {
    display:inline-block;
    font-size:3.2vw;
    margin-left:0.6vw;
    vertical-align:super;
    opacity:0.9;
    font-weight:500;
  }

  /* Two-line date */
  .digital-date {
    margin-top:0.6em;
    text-align:center;
    line-height:1.05;
    font-weight:500;
  }
  .digital-date .weekday { display:block; font-size:4vw; }
  .digital-date .monthline { display:block; font-size:5vw; }
  .digital-date .day { color:#ff4c4c; }

  /* responsive tweaks for small screens */
  @media (max-width:1024px) {
    .time-main { font-size:20vw; }
    .time-ampm { font-size:3.6vw; }
    .digital-date .weekday { font-size:4.6vw; }
    .digital-date .monthline { font-size:6vw; }
  }
</style>
</head>
<body>
  <div class="layout">
    <!-- Left: analog -->
    <div class="half">
      <div id="analog">
        <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
          <circle cx="100" cy="100" r="98" stroke="#333" stroke-width="4" fill="none" />
          <line id="hour-hand" x1="100" y1="100" x2="100" y2="55" stroke="#fff" stroke-width="6" stroke-linecap="round" />
          <line id="minute-hand" x1="100" y1="100" x2="100" y2="35" stroke="#fff" stroke-width="4" stroke-linecap="round" />
          <line id="second-hand" x1="100" y1="100" x2="100" y2="25" stroke="#ff4c4c" stroke-width="2" stroke-linecap="round" />
          <circle cx="100" cy="100" r="3" fill="#ff4c4c" />
        </svg>
      </div>
    </div>

    <!-- Right: digital -->
    <div class="half">
      <div class="digital-container">
        <div class="time-area" id="timeArea">
          <div class="digital-time" id="digitalTimeWrap">
            <span class="time-main" id="timeMain">--:--</span>
            <span class="time-ampm" id="timeAMPM">AM</span>
          </div>
        </div>

        <div class="digital-date" id="digitalDate">
          <span class="weekday">Loading...</span>
          <span class="monthline"><span class="month">---</span> <span class="day">--</span></span>
        </div>
      </div>
    </div>
  </div>

<script>
/* Simple, old-friendly helpers */
function $(id){ return document.getElementById(id); }

/* Analog clock (unchanged) */
function updateAnalog() {
  var now = new Date();
  var sec = now.getSeconds();
  var min = now.getMinutes();
  var hr = now.getHours() % 12;
  $('hour-hand').setAttribute('transform','rotate(' + (hr*30 + min/2) + ',100,100)');
  $('minute-hand').setAttribute('transform','rotate(' + (min*6) + ',100,100)');
  $('second-hand').setAttribute('transform','rotate(' + (sec*6) + ',100,100)');
}

/* Build date strings manually (old safari safe) */
var months = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
var weekdays = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];

var lastDateString = "";

/* Update digital time and date.
   Time is updated every second, date only when it changes.
   We call fitTime() after changing time text so the scale adjusts.
*/
function updateDigital() {
  var now = new Date();
  var hours = now.getHours();
  var minutes = now.getMinutes();
  minutes = (minutes < 10 ? '0' : '') + minutes;
  var ampm = hours >= 12 ? 'PM' : 'AM';
  hours = hours % 12 || 12;

  // update time text (main and ampm)
  $('timeMain').innerText = hours + ':' + minutes;
  $('timeAMPM').innerText = ampm;

  // update date only if changed
  var wd = weekdays[now.getDay()];
  var mo = months[now.getMonth()];
  var day = now.getDate();
  var newDateKey = wd + '|' + mo + '|' + day;
  if (newDateKey !== lastDateString) {
    lastDateString = newDateKey;
    // build two-line date markup, this is done sparingly (only on change)
    var dateEl = $('digitalDate');
    // use innerHTML once (safe) because we avoid frequent writes
    dateEl.innerHTML = '<span class="weekday">' + wd + '</span>' +
                       '<span class="monthline"><span class="month">' + mo + '</span> <span class="day">' + day + '</span></span>';
  }

  // adjust size to prevent clipping
  fitTime();
}

/* Fit the time so it never overflows the time-area width.
   We scale the .time-main element only (AM/PM stays unscaled).
   Works with old browsers (uses offsetWidth).
*/
var lastScale = 1;
function fitTime() {
  try {
    var timeArea = $('timeArea');
    var main = $('timeMain');
    var ampm = $('timeAMPM');

    // make sure main has no transform so measurement is accurate
    main.style.transform = 'none';

    // widths
    var areaW = timeArea.clientWidth; // available width
    // measure actual widths
    var mainW = main.offsetWidth;
    var ampmW = ampm.offsetWidth + (parseInt(getComputedStyle(ampm).marginLeft,10)||0);

    // small padding so digits don't touch edges
    var padding = Math.max(6, Math.round(areaW * 0.03));
    var available = areaW - ampmW - padding;

    var scale = 1;
    if (mainW > available && mainW > 0) {
      scale = available / mainW;
      if (scale < 0.5) scale = 0.5; // keep legible
    }

    // only update DOM if scale changed meaningfully
    if (Math.abs(scale - lastScale) > 0.01) {
      main.style.transform = 'scale(' + scale + ')';
      main.style.transformOrigin = 'left center';
      lastScale = scale;
      // nudge AM/PM vertical position according to scale (keeps it visually aligned)
      var topOffset = Math.max(-3, Math.round(-3 * scale));
      ampm.style.top = topOffset + 'vw';
    }
  } catch (e) {
    // fail silently on weird old browsers
  }
}

/* initialization */
setInterval(updateAnalog, 1000);
setInterval(updateDigital, 1000);
window.addEventListener ? window.addEventListener('resize', fitTime) : window.onresize = fitTime;

updateAnalog();
updateDigital();
</script>
</body>
</html>

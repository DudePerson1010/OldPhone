<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1024, height=768, initial-scale=1.0, user-scalable=no">
<title>Clock + Weather + Quote</title>
<style>
body {
  margin: 0;
  background-color: #000;
  color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  display: flex;
  height: 100vh;
  overflow: hidden;
}

.half {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

#analog {
  width: 90%;
  height: 90%;
}

#analog svg { width: 100%; height: 100%; }

.digital-container {
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: 100%;
  width: 100%;
  padding: 2vh 2vw;
  box-sizing: border-box;
}

.digital-time {
  font-size: 10vw;
  font-weight: 600;
  margin: 0;
  letter-spacing: -2px;
}

.digital-date {
  margin-top: 0.1em;
  font-size: 4vw;
  color: #fff;
  font-weight: 500;
}

.digital-date span.day { color: #ff4c4c; }

.weather {
  margin-top: 0.8em;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.6em;
}

.weather-main {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6em;
  font-weight: 500;
  font-size: 4vw;
}

.weather-icon { font-size: 4.5vw; }

.weather-extra {
  display: flex;
  flex-direction: column;
  align-items: center;
  font-size: 3vw;
  color: #aaa;
}

.weather-extra span { margin-top: 0.2em; }

.quote {
  font-size: 3vw;
  font-style: normal;
  color: #fff;
  margin-bottom: 2vh;
}

.quote-author {
  font-size: 2vw;
  font-style: italic;
  margin-top: 0.3em;
}

@media (max-width: 1024px) {
  .digital-time { font-size: 12vw; }
  .digital-date { font-size: 5vw; }
  .weather-main { font-size: 5vw; }
  .weather-icon { font-size: 5.5vw; }
  .weather-extra { font-size: 4vw; }
  .quote { font-size: 4vw; }
  .quote-author { font-size: 3vw; }
}
</style>
</head>
<body>

<div class="half">
  <div id="analog">
    <svg viewBox="0 0 200 200">
      <circle cx="100" cy="100" r="98" stroke="#333" stroke-width="4" fill="none" />
      <line id="hour-hand" x1="100" y1="100" x2="100" y2="55" stroke="#fff" stroke-width="6" stroke-linecap="round" />
      <line id="minute-hand" x1="100" y1="100" x2="100" y2="35" stroke="#fff" stroke-width="4" stroke-linecap="round" />
      <line id="second-hand" x1="100" y1="100" x2="100" y2="25" stroke="#ff4c4c" stroke-width="2" stroke-linecap="round" />
      <circle cx="100" cy="100" r="3" fill="#ff4c4c" />
    </svg>
  </div>
</div>

<div class="half">
  <div class="digital-container">
    <div>
      <div class="digital-time" id="digitalTime">--:--</div>
      <div class="digital-date" id="digitalDate">Loading date...</div>
    </div>
    <div class="weather">
      <div class="weather-main">
        <span class="weather-icon" id="weatherIcon">‚òÄÔ∏è</span>
        <span id="currentCondition">Loading...</span>
      </div>
      <div class="weather-extra">
        <span id="currentWind">Wind: -- mph</span>
        <span id="currentRain" style="display:none;">Rain: -- in</span>
      </div>
    </div>
    <div>
      <div class="quote" id="quoteText">Loading quote...</div>
      <div class="quote-author" id="quoteAuthor"></div>
    </div>
  </div>
</div>

<script>
// Analog clock
function updateAnalog() {
  var now = new Date();
  var sec = now.getSeconds();
  var min = now.getMinutes();
  var hr = now.getHours() % 12;
  document.getElementById('hour-hand').setAttribute('transform', 'rotate(' + (hr*30 + min/2) + ',100,100)');
  document.getElementById('minute-hand').setAttribute('transform', 'rotate(' + (min*6) + ',100,100)');
  document.getElementById('second-hand').setAttribute('transform', 'rotate(' + (sec*6) + ',100,100)');
}

// Time/date
function updateDigital() {
  var now = new Date();
  var hours = now.getHours();
  var minutes = now.getMinutes();
  minutes = (minutes < 10 ? '0' : '') + minutes;
  var ampm = hours >= 12 ? 'PM' : 'AM';
  hours = hours % 12 || 12;
  document.getElementById('digitalTime').textContent = hours + ':' + minutes + ' ' + ampm;

  var month = now.toLocaleString('en-US', { month: 'short' });
  var weekday = now.toLocaleString('en-US', { weekday: 'long' });
  var day = now.getDate();
  document.getElementById('digitalDate').innerHTML = weekday + ', ' + month + ' <span class="day">' + day + '</span>';
}

// Weather
function fetchWeather() {
  var latitude = 40.958;
  var longitude = -73.808;
  var url = 'https://api.open-meteo.com/v1/forecast?latitude=' + latitude + '&longitude=' + longitude + '&current_weather=true&temperature_unit=fahrenheit&windspeed_unit=mph&hourly=precipitation';
  try {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.onreadystatechange = function() {
      if(xhr.readyState === 4 && xhr.status === 200){
        var data = JSON.parse(xhr.responseText);
        var w = data.current_weather;
        document.getElementById('currentCondition').textContent = getWeatherDesc(w.weathercode) + ', ' + Math.round(w.temperature) + '¬∞F';
        document.getElementById('weatherIcon').textContent = getWeatherIcon(w.weathercode);
        document.getElementById('currentWind').textContent = 'Wind: ' + Math.round(w.windspeed) + ' mph';
        if(data.hourly && data.hourly.precipitation){
          var rainAmount = data.hourly.precipitation[0];
          var rainEl = document.getElementById('currentRain');
          if(rainAmount > 0){
            rainEl.style.display = 'block';
            rainEl.textContent = 'Rain: ' + rainAmount.toFixed(2) + ' in';
          } else { rainEl.style.display = 'none'; }
        }
      }
    };
    xhr.send();
  } catch(e){
    document.getElementById('currentCondition').textContent = 'Weather unavailable';
  }
}

function getWeatherIcon(code){
  if(code===0) return '‚òÄÔ∏è';
  if(code<=2) return 'üå§Ô∏è';
  if(code<=45) return '‚òÅÔ∏è';
  if(code<=67) return 'üåßÔ∏è';
  if(code<=77) return 'üå®Ô∏è';
  if(code<=99) return '‚õàÔ∏è';
  return '‚ùì';
}

function getWeatherDesc(code){
  if(code===0) return 'Clear';
  if(code<=2) return 'Partly Cloudy';
  if(code<=45) return 'Cloudy';
  if(code<=67) return 'Rain';
  if(code<=77) return 'Snow';
  if(code<=99) return 'Storm';
  return 'Unknown';
}

// Quotes
var quotes = [
  {text:"You must take the chances to go faster.", author:"Ayrton Senna"},
  {text:"Life is about taking risks and going for it.", author:"Richard Branson"},
  {text:"Only those who dare to fail greatly can ever achieve greatly.", author:"Robert F. Kennedy"},
  {text:"I skate to where the puck is going to be, not where it has been.", author:"Wayne Gretzky"},
  {text:"Success comes from taking calculated risks.", author:"Elon Musk"}
];

function updateQuote(){
  var now = new Date();
  var index = now.getHours() % quotes.length;
  var q = quotes[index];
  document.getElementById('quoteText').textContent = '"' + q.text + '"';
  var authorEl = document.getElementById('quoteAuthor');
  authorEl.textContent = q.author;
  authorEl.style.fontStyle = 'italic';
}

// Auto-refresh every hour
function scheduleHourlyRefresh(){
  var now = new Date();
  var msUntilNextHour = ((60 - now.getMinutes())*60 - now.getSeconds())*1000;
  setTimeout(function(){ location.reload(); }, msUntilNextHour + 1000);
}

// Initialize
setInterval(updateAnalog, 1000);
setInterval(updateDigital, 1000);
updateAnalog();
updateDigital();
fetchWeather();
updateQuote();
scheduleHourlyRefresh();
</script>

</body>
</html>
